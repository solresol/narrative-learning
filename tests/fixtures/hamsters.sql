PRAGMA foreign_keys=OFF;
BEGIN TRANSACTION;
CREATE TABLE metadata (
            table_name        TEXT PRIMARY KEY,
            x_axis_name       TEXT NOT NULL,
            y_axis_name       TEXT NOT NULL,
            target_col_name   TEXT NOT NULL,
            x_meaning         TEXT NOT NULL,
            o_meaning         TEXT NOT NULL,
            valid_x_min       REAL,
            valid_x_max       REAL,
            valid_y_min       REAL,
            valid_y_max       REAL,
            show_zero_bars    INTEGER NOT NULL DEFAULT 0
        );
INSERT INTO metadata VALUES('hamsters','height','weight','sex','male','female',0.0,10.0,0.0,10.0,0);
CREATE TABLE unsaved_changes (
            id            INTEGER PRIMARY KEY,
            table_name    TEXT NOT NULL,
            action        TEXT NOT NULL CHECK (action IN ('insert','delete','update','meta')),
            data_id       INTEGER,
            x             REAL,
            y             REAL,
            old_target    TEXT,
            new_target    TEXT,
            meta_field    TEXT,
            old_value     TEXT,
            new_value     TEXT,
            is_active     INTEGER NOT NULL DEFAULT 1
        );
CREATE TABLE hamsters (id INTEGER PRIMARY KEY, x REAL NOT NULL, y REAL NOT NULL, target TEXT NOT NULL);
INSERT INTO hamsters VALUES(1,4.5569620253164559997,6.9565217391304345895,'male');
INSERT INTO hamsters VALUES(2,4.4303797468354426669,6.5217391304347831493,'male');
INSERT INTO hamsters VALUES(3,4.3037974683544302223,6.5217391304347831493,'male');
INSERT INTO hamsters VALUES(4,4.1772151898734177777,6.5217391304347831493,'male');
INSERT INTO hamsters VALUES(5,4.1772151898734177777,6.0869565217391308209,'male');
INSERT INTO hamsters VALUES(6,4.3037974683544302223,5.6521739130434784925,'male');
INSERT INTO hamsters VALUES(7,4.4303797468354426669,5.2173913043478261641,'male');
INSERT INTO hamsters VALUES(8,4.4303797468354426669,5.6521739130434784925,'male');
INSERT INTO hamsters VALUES(9,4.9367088607594933336,6.0869565217391308209,'female');
INSERT INTO hamsters VALUES(10,4.9367088607594933336,6.9565217391304345895,'female');
INSERT INTO hamsters VALUES(11,5.0632911392405066663,6.5217391304347831493,'female');
INSERT INTO hamsters VALUES(12,5.0632911392405066663,5.6521739130434784925,'female');
INSERT INTO hamsters VALUES(13,5.189873417721519111,7.8260869565217392462,'male');
INSERT INTO hamsters VALUES(14,5.189873417721519111,7.3913043478260869179,'male');
INSERT INTO hamsters VALUES(15,5.3164556962025315556,7.3913043478260869179,'male');
INSERT INTO hamsters VALUES(16,5.4430379746835440002,6.9565217391304345895,'male');
INSERT INTO hamsters VALUES(17,5.569620253164557333,6.5217391304347831493,'male');
INSERT INTO hamsters VALUES(18,5.4430379746835440002,6.5217391304347831493,'male');
INSERT INTO hamsters VALUES(19,5.569620253164557333,6.0869565217391308209,'male');
INSERT INTO hamsters VALUES(20,5.569620253164557333,5.2173913043478261641,'male');
INSERT INTO hamsters VALUES(21,5.4430379746835440002,5.2173913043478261641,'male');
INSERT INTO hamsters VALUES(22,5.569620253164557333,5.6521739130434784925,'male');
INSERT INTO hamsters VALUES(23,6.2025316455696204442,7.3913043478260869179,'female');
INSERT INTO hamsters VALUES(24,6.0759493670886079996,6.9565217391304345895,'female');
INSERT INTO hamsters VALUES(25,6.0759493670886079996,6.5217391304347831493,'female');
INSERT INTO hamsters VALUES(26,6.2025316455696204442,6.0869565217391308209,'female');
INSERT INTO hamsters VALUES(27,6.2025316455696204442,6.5217391304347831493,'female');
INSERT INTO hamsters VALUES(28,6.2025316455696204442,6.5217391304347831493,'female');
INSERT INTO hamsters VALUES(29,6.2025316455696204442,6.9565217391304345895,'female');
INSERT INTO hamsters VALUES(30,5.4430379746835440002,6.9565217391304345895,'female');
INSERT INTO hamsters VALUES(31,5.569620253164557333,5.6521739130434784925,'female');
CREATE INDEX uc_table ON unsaved_changes(table_name, id)
    ;
CREATE INDEX hamsters_xy ON hamsters(x, y);
CREATE INDEX hamsters_target ON hamsters(target);
COMMIT;
